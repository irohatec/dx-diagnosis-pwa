<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DX推進診断ツール</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#1565c0">
    <meta name="description" content="中小企業向けDXデジタル化診断ツール">
    
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- CSS -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Marked.js for Markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked@4.3.0/marked.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="container">
                <h1>DX推進診断ツール</h1>
                <p class="subtitle">あなたの会社のデジタル化レベルを診断します</p>
                <button id="install-button" class="install-btn" style="display: none;">
                    <span>📱</span> アプリをインストール
                </button>
            </div>
        </header>

        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="step-indicators">
                <div class="step active" data-step="1">基本情報</div>
                <div class="step" data-step="2">診断</div>
                <div class="step" data-step="3">結果</div>
                <div class="step" data-step="4">AI相談</div>
            </div>
        </div>

        <main class="main-content">
            <!-- Section 1: 基本情報入力 -->
            <section id="section-1" class="section active">
                <div class="container">
                    <div class="section-header">
                        <h2>基本情報を入力してください</h2>
                        <p>より正確な診断のため、会社の基本情報をお聞かせください</p>
                    </div>
                    
                    <form class="form-container">
                        <div class="form-group">
                            <label for="company-name">会社名</label>
                            <input type="text" id="company-name" placeholder="株式会社○○">
                        </div>
                        
                        <div class="form-group">
                            <label for="company-size">従業員数</label>
                            <select id="company-size">
                                <option value="">選択してください</option>
                                <option value="1-5">1-5名</option>
                                <option value="6-20">6-20名</option>
                                <option value="21-50">21-50名</option>
                                <option value="51-100">51-100名</option>
                                <option value="101-300">101-300名</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="industry">業種</label>
                            <select id="industry">
                                <option value="">選択してください</option>
                                <option value="manufacturing">製造業</option>
                                <option value="retail">小売業</option>
                                <option value="service">サービス業</option>
                                <option value="construction">建設業</option>
                                <option value="healthcare">医療・介護</option>
                                <option value="education">教育</option>
                                <option value="it">IT・通信</option>
                                <option value="finance">金融業</option>
                                <option value="other">その他</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="current-tools">現在使用中のデジタルツール（複数選択可）</label>
                            <div class="checkbox-group">
                                <label class="checkbox-item">
                                    <input type="checkbox" value="email"> メール
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" value="office"> Office系ソフト
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" value="accounting"> 会計ソフト
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" value="crm"> 顧客管理システム
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" value="cloud"> クラウドサービス
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" value="website"> ホームページ
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" value="sns"> SNS活用
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" value="none"> 特になし
                                </label>
                            </div>
                        </div>
                    </form>
                    
                    <div class="button-container">
                        <button class="btn btn-primary" id="start-diagnosis-btn">診断を開始する</button>
                    </div>
                </div>
            </section>

            <!-- Section 2: デジタル化レベル診断 -->
            <section id="section-2" class="section">
                <div class="container">
                    <div class="section-header">
                        <h2>デジタル化レベル診断</h2>
                        <p>各質問に最も当てはまるものを選択してください</p>
                    </div>
                    
                    <div id="quiz-container" class="quiz-container">
                        <!-- Quiz questions will be populated by JavaScript -->
                    </div>
                    
                    <div class="button-container">
                        <button class="btn btn-secondary" id="prev-section-1-btn">戻る</button>
                        <button class="btn btn-primary" id="calculate-btn" disabled>結果を見る</button>
                    </div>
                </div>
            </section>

            <!-- Section 3: 結果表示 -->
            <section id="section-3" class="section">
                <div class="container">
                    <div class="section-header">
                        <h2>診断結果</h2>
                    </div>
                    
                    <div id="results-container" class="results-container">
                        <!-- Results will be populated by JavaScript -->
                    </div>
                    
                    <div class="button-container">
                        <button class="btn btn-secondary" id="prev-section-2-btn">戻る</button>
                        <button class="btn btn-success" id="download-results-btn">結果をダウンロード</button>
                        <button class="btn btn-primary" id="show-chat-btn">AI相談する</button>
                        <button class="btn btn-primary" id="restart-diagnosis-1-btn">もう一度診断する</button>
                    </div>
                </div>
            </section>

            <!-- Section 4: AI相談 -->
            <section id="section-4" class="section">
                <div class="container">
                    <div class="section-header">
                        <h2>AI相談チャット</h2>
                        <p>DXに関するご質問やお悩みをAIがサポートします</p>
                    </div>

                    <!-- AI Consultant Info -->
                    <div class="ai-consultant-info">
                        <div class="consultant-card">
                            <h3>🤖 いろはTECのAIコンサルタントが対応します</h3>
                            <p>DXに関するご質問やお悩みを、専門的な知識を持つAIがサポートいたします。お気軽にご相談ください。</p>
                        </div>
                    </div>

                    <!-- Chat Interface -->
                    <div id="chat-interface" class="chat-interface">
                        <!-- Sample Questions -->
                        <div class="sample-questions">
                            <h4>💡 よくある質問</h4>
                            <div class="question-chips">
                                <button class="question-chip" data-question="デジタル化の第一歩は何から始めればよいですか？">
                                    デジタル化の第一歩は？
                                </button>
                                <button class="question-chip" data-question="リモートワークを導入するための具体的な方法を教えてください。">
                                    リモートワーク導入方法は？
                                </button>
                                <button class="question-chip" data-question="小規模企業でも導入しやすいクラウドサービスを教えてください。">
                                    おすすめクラウドサービスは？
                                </button>
                                <button class="question-chip" data-question="従業員のITスキル向上のための研修方法を教えてください。">
                                    ITスキル研修方法は？
                                </button>
                                <button class="question-chip" data-question="セキュリティ対策で最低限やるべきことを教えてください。">
                                    基本的なセキュリティ対策は？
                                </button>
                                <button class="question-chip" data-question="業務効率化のためのツール選定方法を教えてください。">
                                    効率化ツールの選び方は？
                                </button>
                            </div>
                        </div>

                        <!-- Chat Messages -->
                        <div class="chat-container">
                            <div id="chat-messages" class="chat-messages">
                                <div class="message ai-message">
                                    <div class="message-avatar">🤖</div>
                                    <div class="message-content">
                                        <div class="message-bubble">
                                            こんにちは！いろはTECのDX専門コンサルタントです。<br>
                                            中小企業のデジタル化やITツール導入について、実践的なアドバイスをいたします。<br>
                                            上記のサンプル質問をクリックするか、直接ご質問を入力してください。
                                        </div>
                                        <div class="message-time">いろはTEC</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Chat Input -->
                        <div class="chat-input-container">
                            <div class="chat-input-wrapper">
                                <textarea id="chat-input" placeholder="DXに関する質問を入力してください..." rows="2"></textarea>
                                <button id="send-button" class="send-button" disabled>
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="chat-controls">
                                <button class="btn btn-secondary btn-small" id="clear-chat-btn">チャットをクリア</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="button-container">
                        <button class="btn btn-secondary" id="prev-section-3-btn">戻る</button>
                        <button class="btn btn-primary" id="restart-diagnosis-2-btn">診断をやり直す</button>
                    </div>
                </div>
            </section>
        </main>
        
        <footer class="footer">
            <div class="container">
                <p>&copy; 2025 DX推進診断ツール</p>
            </div>
        </footer>
    </div>
    
    <script src="app.js"></script>
</body>
</html>